<?xml version="1.0" encoding="UTF-8"?>  
<beans xmlns="http://www.springframework.org/schema/beans"  
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
    xmlns:p="http://www.springframework.org/schema/p"  
    xmlns:context="http://www.springframework.org/schema/context"  
    xmlns:mongo="http://www.springframework.org/schema/data/mongo" 
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans  
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  
           http://www.springframework.org/schema/data/mongo    
           http://www.springframework.org/schema/data/mongo/spring-mongo.xsd 
           http://www.springframework.org/schema/context     
           http://www.springframework.org/schema/context/spring-context-3.0.xsd">  
  
    <!-- 自动扫描bean，把作了注解的类转换为bean -->  
    <context:component-scan base-package="com.oio.webapp.controller" />  
  
    <!-- 启动Spring MVC的注解功能，完成请求和注解POJO的映射 -->  
    <bean  
        class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />  
  
    <!-- 对模型视图名称的解析，在请求时模型视图名称添加前后缀 -->  
    <bean  
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"  
        p:prefix="" p:suffix="" />  
    <!-- 对静态资源文件的访问  方案一 （二选一） -->  
 
    <!-- apache.dbcp连接池的配置 -->  
    <bean id="dataSource"  
        class="org.apache.commons.dbcp.BasicDataSource"  
        destroy-method="close">  
        <property name="driverClassName"  value="com.mysql.jdbc.Driver">  
        </property>  
        <!-- 修改数据库链接的地址 -->
        <property name="url" value="jdbc:mysql://101.200.221.216:3306/ucrm?useUnicode=true&amp;characterEncoding=utf-8&amp;
				zeroDateTimeBehavior=convertToNull&amp;
				transformedBitIsBoolean=true"></property>  
        <property name="username" value="dev"></property>  
        <property name="password" value="new.1234"></property>   
        <property name="maxActive" value="100"></property>  
        <property name="maxIdle" value="20"></property>  
        <property name="maxWait" value="500"></property>  
        <property name="defaultAutoCommit" value="true"></property>  
    </bean>  
      
    <!-- jdbc注入 -->  
    <bean id="jdbcTemplate"  
        class="org.springframework.jdbc.core.JdbcTemplate">  
        <property name="dataSource">  
            <ref bean="dataSource" />  
        </property>  
    </bean>  
       <!-- mongodb 配置 -->
	 <!-- 加载属性配置文件 -->   
    <context:property-placeholder location="classpath*:mongodb.properties"/>
    <mongo:mongo id="mongo" replica-set="101.200.221.216:27017" > 
    <!-- 一些连接属性的设置 -->      
    <mongo:options  
             connections-per-host="${mongo.connectionsPerHost}"  
             threads-allowed-to-block-for-connection-multiplier="${mongo.threadsAllowedToBlockForConnectionMultiplier}"  
             connect-timeout="${mongo.connectTimeout}" 
             max-wait-time="${mongo.maxWaitTime}"  
             auto-connect-retry="${mongo.autoConnectRetry}"  
             socket-keep-alive="${mongo.socketKeepAlive}" 
             socket-timeout="${mongo.socketTimeout}" 
             write-number="1"  
             write-timeout="0"  
             write-fsync="true"/>  
    </mongo:mongo>  
                      
    <!-- mongo的工厂，通过它来取得mongo实例,dbname为mongodb的数据库名，没有的话会自动创建 -->  
<!--     <mongo:db-factory dbname="ac" mongo-ref="mongo"/>   -->
     
    
    <!-- mongodb的主要操作对象，所有对mongodb的增删改查的操作都是通过它完成 -->  
    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">  
    	<constructor-arg ref="mongo"/>   
	    <constructor-arg name="databaseName" value="ac"/>
   
    </bean>   
     
    
     
    <!-- dao注入 -->  
    <bean id="personService" class="com.oio.webapp.service.impl.PersonServiceImpl">  
        <property name="jdbcTemplate" ref="jdbcTemplate"></property>  
    </bean>  
    <bean id="appUserService" class="com.oio.webapp.service.impl.AppUserServiceImpl">  
        <property name="jdbcTemplate" ref="jdbcTemplate"></property>  
    </bean>  
   <bean id="cdrService" class="com.oio.webapp.service.impl.CdrServiceImpl">  
        <property name="mongoTemplate" ref="mongoTemplate"></property>  
    </bean>       
      <bean id="contactsService" class="com.oio.webapp.service.impl.ContactsServiceImpl">  
        <property name="jdbcTemplate" ref="jdbcTemplate"></property>  
    </bean>  
   <bean id="judgeSubsRelaService" class="com.oio.webapp.service.impl.JudgeSubsRelaServiceImpl">  
        <property name="jdbcTemplate" ref="jdbcTemplate"></property>  
    </bean>
      <bean id="axybService" class="com.oio.webapp.service.impl.AxybServiceImpl">  
        <property name="jdbcTemplate" ref="jdbcTemplate"></property>  
    </bean>
</beans>  